{"version":3,"sources":["scripts.js","cms/collections.js","helpers/form.js","helpers/laravel.js"],"names":["$","document","ready","Laravel","initialize","Form","csrf","observer","on","submit","this","Collections","_public","addField","fieldNumber","post","BASEURL","done","data","append","view","removeField","$formField","remove","search","query","$collections","children","end","attr","parseInt","parent","slug","val","$field","find","$options","hasClass","fadeIn","fadeOut","event","preventDefault","_private","ajaxSettings","beforeSubmit","arr","$form","options","removeClass","prop","show","addClass","html","callback","success","result","status","xhr","setTimeout","slideUp","trigger","error","responseJSON","errors","each","key","value","split","i","element","siblings","text","errorMessage","form","ajaxSubmit","ajaxComplete","responseText","response","JSON","parse","redirect","timeout","window","location","str","$to","separator","getSlug","ajaxSetup","headers","X-CSRF-Token","cache","cx","methodLinks","registerEvents","handleMethod","e","link","httpMethod","toUpperCase","inArray","verifyConfirm","createForm","confirm","method","action","token","type","name","hiddenInput","appendTo"],"mappings":"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","file":"scripts.min.js","sourcesContent":["$(document).ready(function() {\r\n\r\n    Laravel.initialize();\r\n\r\n    Form.csrf();\r\n\r\n    Form.observer();\r\n\r\n    $('body').on('submit', 'form.ajax-form', function () {\r\n\r\n        return Form.submit($(this));\r\n\r\n    });\r\n\r\n});","var Collections = (function() {\r\n\r\n    var _private = {};\r\n    var _public = {};\r\n    \r\n    _public.addField = function(fieldNumber) {\r\n\r\n        $.post(BASEURL + \"/collections/addField\", {\r\n            fieldNumber: fieldNumber,\r\n        }).done(function(data){\r\n            $('.form-fields').append(data.view);\r\n        });\r\n\r\n    }\r\n\r\n    _public.removeField = function($formField) {\r\n\r\n        $formField.remove();\r\n\r\n    }\r\n\r\n    _public.search = function(query) {\r\n\r\n        $.post(BASEURL + \"/collections/search\", {\r\n            query: query,\r\n        }).done(function(data) {\r\n            $collections = $('.dashboard-collections');\r\n            $collections.children()\r\n                        .remove()\r\n                        .end()\r\n                        .append(data.view);\r\n        });\r\n\r\n    }\r\n\r\n    return _public;\r\n\r\n}());\r\n\r\n\r\n$('form.collection-form').on('click', '.add-field', function () {\r\n\r\n    var fieldNumber = $(this).attr('data-field-number');\r\n    \r\n    $(this).attr('data-field-number', parseInt(fieldNumber) + 1);\r\n\r\n    Collections.addField(fieldNumber);\r\n\r\n});\r\n\r\n$('form.collection-form').on('click', '.remove-field', function () {\r\n\r\n    $formField = $(this).parent().parent();\r\n\r\n    Collections.removeField($formField);\r\n\r\n});\r\n\r\n$('form.collection-form').on('keyup', '#name', function () {\r\n\r\n    Form.slug($(this).val(), $('#slug'));\r\n\r\n});\r\n\r\n$('form.collection-form').on('keyup', '.field-name', function () {\r\n\r\n    var $field = $(this).parent().parent().find('.field-label');\r\n\r\n    Form.slug($(this).val(), $field, '_');\r\n\r\n});\r\n\r\n$('form.collection-form').on('change', 'select', function () {\r\n    var $options = $(this).parent().parent().find('.collection-options');\r\n\r\n    if($(this).hasClass(\"collection-type\") && $(this).val() == 'select') {\r\n        $options.fadeIn();\r\n    } else {\r\n        $options.fadeOut();\r\n        $options.find('input')\r\n                .val('');\r\n    }\r\n\r\n});\r\n\r\n$('form.search-form').on('submit', function (event) {\r\n    \r\n    event.preventDefault();\r\n\r\n    Collections.search($(this).val());\r\n\r\n});\r\n\r\n$('form.search-form').on('keyup', \"input[name='query']\", function () {\r\n    \r\n    Collections.search($(this).val());\r\n\r\n});","var Form = (function(){\r\n\r\n    var _public = {};\r\n    var _private = {};\r\n\r\n    _private.ajaxSettings = {\r\n        beforeSubmit: function (arr, $form, options) {\r\n\r\n            $form.find(\"input, select, textarea\")\r\n                 .removeClass('form-error');\r\n\r\n            $form.find(\"input[type='submit']\").prop('disabled', true);\r\n\r\n            $form.find('.form-status')\r\n                 .show()\r\n                 .removeClass('form-error')\r\n                 .removeClass('form-success')\r\n                 .addClass('form-sending')\r\n                 .html('');\r\n\r\n            $form.find('.form-message')\r\n                 .html('');\r\n \r\n            if(_private.callback.on == 'beforeSubmit') {\r\n                _private.callback.callback({\r\n                    arr: arr,\r\n                    $form: $form,\r\n                    options: options,\r\n                });\r\n            }\r\n\r\n        },\r\n        success: function (result, status, xhr, $form) {\r\n\r\n            $form.find('.form-status')\r\n                 .removeClass('form-sending')\r\n                 .addClass('form-success');\r\n\r\n            setTimeout(function() {\r\n                $('.form-success').slideUp('slow', function() {\r\n                    $(this).html('').removeClass('form-success');\r\n                });\r\n            }, 5000);\r\n\r\n            if($form.hasClass('form-clear')){\r\n                $form.trigger('reset');\r\n            }\r\n\r\n            $form.find(\"input[type='submit']\").prop('disabled', false);\r\n\r\n            if(_private.callback.on == 'success') {\r\n                _private.callback.callback({\r\n                    result: result, \r\n                    status: status, \r\n                    xhr: xhr, \r\n                    $form: $form,\r\n                });\r\n            }\r\n\r\n        },\r\n        error: function (result, status, xhr, $form) {\r\n\r\n            $form.find('.form-status')\r\n                 .removeClass('form-sending')\r\n                 .addClass('form-error');\r\n\r\n            if (result.responseJSON.errors) {\r\n                $.each(result.responseJSON.errors, function (key, value) {\r\n                    if(key.search('.') !== -1) {\r\n                        var key = key.split(\".\");\r\n                        $.each(key, function(i, value) {\r\n                            if(i == 0) {\r\n                                key = value;\r\n                            } else {\r\n                                key+= \"[\" + value + \"]\";\r\n                            }\r\n                        });\r\n                    }\r\n\r\n                    var element = $form.find(\"input[name='\" + key + \"'], textarea[name='\" + key + \"'], select[name='\" + key + \"']\");\r\n                    \r\n                    element.addClass('form-error')\r\n                           .siblings('.form-message')\r\n                           .addClass('error')\r\n                           .text(value);\r\n                });\r\n            } \r\n\r\n            if (result.responseJSON.errorMessage) {\r\n                $form.find('.form-status')\r\n                     .removeClass('form-error')\r\n                     .text(result.responseJSON.errorMessage);\r\n            }\r\n\r\n            $form.find(\"input[type='submit']\").prop('disabled', false);\r\n\r\n            if(_private.callback.on == 'error') {\r\n                _private.callback.callback({\r\n                    result: result, \r\n                    status: status, \r\n                    xhr: xhr, \r\n                    $form: $form,\r\n                });\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    _public.submit = function(form, callback){\r\n\r\n        _private.callback = callback || 'undefined';\r\n        form.ajaxSubmit(_private.ajaxSettings);\r\n\r\n        return false;\r\n\r\n    }\r\n\r\n    _public.observer = function() {\r\n\r\n        $(document).ajaxComplete(function(event, xhr) {\r\n            \r\n            if(xhr.responseText === 'undefined') {\r\n                return false;\r\n            }\r\n\r\n            var response = JSON.parse(xhr.responseText);\r\n\r\n            if(response.redirect && response.timeout) {\r\n                setTimeout(function() {\r\n                    window.location = response.redirect;\r\n                }, response.timeout);\r\n            } else if(response.redirect) {\r\n                window.location = response.redirect;\r\n            }\r\n\r\n        });\r\n\r\n    }\r\n\r\n    _public.slug = function(str, $to, separator) {\r\n\r\n        separator  = separator  || '-';\r\n\r\n        $to.val(getSlug(str, separator));\r\n\r\n    }\r\n\r\n    _public.csrf = function(){\r\n\r\n        $.ajaxSetup({\r\n            headers: {\r\n                'X-CSRF-Token': $('meta[name=\"_token\"]').attr('content'),\r\n            },\r\n            cache: true,\r\n        });\r\n\r\n    }\r\n\r\n    return _public;\r\n\r\n}());\r\n\r\n$('sd').cx();","var Laravel = {\r\n    initialize: function() {\r\n        this.methodLinks = $('a[data-method]');\r\n \r\n        this.registerEvents();\r\n    },\r\n \r\n    registerEvents: function() {\r\n        this.methodLinks.on('click', this.handleMethod);\r\n    },\r\n \r\n    handleMethod: function(e) {\r\n        var link = $(this);\r\n        var httpMethod = link.data('method').toUpperCase();\r\n        var form;\r\n \r\n        if ( $.inArray(httpMethod, ['PUT', 'DELETE']) === - 1 ) {\r\n            return;\r\n        }\r\n \r\n        if ( link.data('confirm') ) {\r\n            if ( ! Laravel.verifyConfirm(link) ) {\r\n                return false;\r\n            }\r\n        }\r\n \r\n        form = Laravel.createForm(link);\r\n        form.submit();\r\n \r\n        e.preventDefault();\r\n    },\r\n \r\n    verifyConfirm: function(link) {\r\n        return confirm(link.data('confirm'));\r\n    },\r\n \r\n    createForm: function(link) {\r\n        var form = $('<form>', {\r\n            'method': 'POST',\r\n            'action': link.attr('href')\r\n        });\r\n\r\n        var token = $('<input>', {\r\n            'type': 'hidden',\r\n            'name': '_token',\r\n            'value': $('meta[name=\"_token\"]').attr('content')\r\n        });\r\n\r\n        var hiddenInput = $('<input>', {\r\n            'name': '_method',\r\n            'type': 'hidden',\r\n            'value': link.data('method')\r\n        });\r\n\r\n        return form.append(token, hiddenInput).appendTo('body');\r\n    }\r\n};"],"sourceRoot":"/source/"}